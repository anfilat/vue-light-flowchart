(function(e){function t(t){for(var o,r,l=t[0],a=t[1],c=t[2],d=0,h=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,l=1;l<n.length;l++){var a=n[l];0!==i[a]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},s=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=a;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0e4a":function(e,t,n){},2691:function(e,t,n){"use strict";var o=n("0e4a"),i=n.n(o);i.a},"3f44":function(e,t,n){},"46e1":function(e,t,n){"use strict";var o=n("f488"),i=n.n(o);i.a},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("light flowchart")]),n("div",{staticClass:"tool-wrapper"},[n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.newNodeType,expression:"newNodeType"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.newNodeType=t.target.multiple?n:n[0]}}},e._l(e.nodeCategory,(function(t,o){return n("option",{key:o,domProps:{value:o}},[e._v(e._s(t))])})),0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newNodeLabel,expression:"newNodeLabel"}],attrs:{type:"text",placeholder:"Input node label"},domProps:{value:e.newNodeLabel},on:{input:function(t){t.target.composing||(e.newNodeLabel=t.target.value)}}}),n("button",{on:{click:e.addNode}},[e._v("ADD")])]),n("div",[n("label",{attrs:{for:"scale"}},[e._v("Scale")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.scene.scale,expression:"scene.scale",modifiers:{number:!0}}],attrs:{id:"scale",type:"number",min:"0.1",step:"0.1"},domProps:{value:e.scene.scale},on:{input:function(t){t.target.composing||e.$set(e.scene,"scale",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("label",{attrs:{for:"orientation"}},[e._v("Orientation")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.scene.orientation,expression:"scene.orientation"}],attrs:{id:"orientation"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.scene,"orientation",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"vert"}},[e._v("Vertical")]),n("option",{attrs:{value:"hor"}},[e._v("Horizontal")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.scene.canChangeNodes,expression:"scene.canChangeNodes"}],attrs:{id:"changeNodes",type:"checkbox"},domProps:{checked:Array.isArray(e.scene.canChangeNodes)?e._i(e.scene.canChangeNodes,null)>-1:e.scene.canChangeNodes},on:{change:function(t){var n=e.scene.canChangeNodes,o=t.target,i=!!o.checked;if(Array.isArray(n)){var s=null,r=e._i(n,s);o.checked?r<0&&e.$set(e.scene,"canChangeNodes",n.concat([s])):r>-1&&e.$set(e.scene,"canChangeNodes",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(e.scene,"canChangeNodes",i)}}}),n("label",{attrs:{for:"changeNodes"}},[e._v("Change nodes")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.scene.canChangeLinks,expression:"scene.canChangeLinks"}],attrs:{id:"changeLinks",type:"checkbox"},domProps:{checked:Array.isArray(e.scene.canChangeLinks)?e._i(e.scene.canChangeLinks,null)>-1:e.scene.canChangeLinks},on:{change:function(t){var n=e.scene.canChangeLinks,o=t.target,i=!!o.checked;if(Array.isArray(n)){var s=null,r=e._i(n,s);o.checked?r<0&&e.$set(e.scene,"canChangeLinks",n.concat([s])):r>-1&&e.$set(e.scene,"canChangeLinks",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(e.scene,"canChangeLinks",i)}}}),n("label",{attrs:{for:"changeLinks"}},[e._v("Change links")])])]),n("light-flowchart",{attrs:{scene:e.scene,height:800},on:{"update:scene":function(t){e.scene=t},canvasClick:e.canvasClick,nodeClick:e.nodeClick,nodeDelete:e.nodeDelete,nodeMouseEnter:e.nodeMouseEnter,nodeMouseLeave:e.nodeMouseLeave,linkClick:e.linkClick,linkBreak:e.linkBreak,linkAdded:e.linkAdded,linkMouseEnter:e.linkMouseEnter,linkMouseLeave:e.linkMouseLeave}})],1)},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowchart-container",on:{mousemove:e.handleMove,mouseup:e.handleUp,mousedown:e.handleDown}},[n("svg",{attrs:{width:"100%",height:e.height+"px"}},e._l(e.lines,(function(t){return n("flowchart-link",e._b({key:t.id,attrs:{options:e.linkOptions},on:{linkMouseEnter:function(n){return e.linkMouseEnter(t.id)},linkMouseLeave:function(n){return e.linkMouseLeave(t.id)},linkClick:function(n){return e.linkClick(t.id)},deleteLink:function(n){return e.linkDelete(t.id)}}},"flowchart-link",t,!1))})),1),e._l(e.scene.nodes,(function(t){return n("flowchart-node",e._b({key:t.id,attrs:{options:e.nodeOptions},on:{linkingStart:function(n){return e.linkingStart(t.id)},linkingStop:function(n){return e.linkingStop(t.id)},tryLinking:function(n){return e.tryAddNodeToLink(t.id)},nodeMouseEnter:function(n){return e.nodeMouseEnter(t.id)},nodeMouseLeave:function(n){return e.nodeMouseLeave(t.id)},nodeSelected:function(n){return e.nodeSelected(t.id,n)}}},"flowchart-node",t,!1))}))],2)},l=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{on:{mousedown:e.handleClick,mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave}},e._l(e.sections,(function(t){return n("g",{key:t.key},[n("path",{style:e.pathStyle,attrs:{d:t.path}}),e.show.delete?n("a",{on:{click:e.deleteLink}},[n("circle",{attrs:{cx:"0",cy:"0",r:"8","fill-opacity":"0",transform:t.transform}}),n("path",{style:e.deleteStyle,attrs:{d:"M -4 -4 L 4 4 M 4 -4 L -4 4",transform:t.transform}})]):n("path",{style:e.arrowStyle,attrs:{d:"M -1 -1 L 0 1 L 1 -1 z",transform:t.transform}})])})),0)},c=[];function u(e,t){return g(e)||p(e,t)||h(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done);o=!0)if(n.push(r.value),t&&n.length===t)break}catch(a){i=!0,s=a}finally{try{o||null==l["return"]||l["return"]()}finally{if(i)throw s}}return n}}function g(e){if(Array.isArray(e))return e}var m={name:"FlowchartLink",props:{id:Number,color:String,segments:Array,options:{type:Object,default:function(){return{scale:1,themeColor:"",labelColor:"",linkWidth:2.73205,canChange:!0}}}},data:function(){return{show:{delete:!1}}},methods:{handleClick:function(){this.$emit("linkClick")},handleMouseEnter:function(){this.id&&(this.options.canChange&&(this.show.delete=!0),this.$emit("linkMouseEnter"))},handleMouseLeave:function(){this.id&&(this.options.canChange&&(this.show.delete=!1),this.$emit("linkMouseLeave"))},deleteLink:function(){this.$emit("deleteLink")}},computed:{sections:function(){var e=this;return this.segments.map((function(t,n){var o=u(t,4),i=o[0],s=o[1],r=o[2],l=o[3],a=(r+i)/2,c=(l+s)/2,d=i,h=s+50,f=r,p=l-50,g=180*-Math.atan2(r+f-d-i,l+p-h-s)/Math.PI;g<0&&(g+=360);var m="M ".concat(i,", ").concat(s," C ").concat(d,", ").concat(h,", ").concat(f,", ").concat(p,", ").concat(r,", ").concat(l),v="translate(".concat(a,", ").concat(c,") rotate(").concat(g,") scale(").concat(e.options.scale,")");return{key:n,path:m,transform:v}}))},pathStyle:function(){return{stroke:this.color||this.options.themeColor,strokeWidth:this.options.linkWidth*this.options.scale,fill:"none"}},deleteStyle:function(){return{stroke:this.options.labelColor,strokeWidth:.8*this.options.linkWidth,fill:"none"}},arrowStyle:function(){return{stroke:this.color||this.options.themeColor,strokeWidth:2*this.options.linkWidth,fill:"none"}}}},v=m,y=(n("46e1"),n("2877")),k=Object(y["a"])(v,a,c,!1,null,"aa191c4e",null),b=k.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowchart-node",class:[{selected:e.isSelected},e.options.orientation],style:e.nodeStyle,on:{mousedown:function(t){return t.preventDefault(),e.handleMousedown(t)},mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave}},[n("div",{staticClass:"node-port node-input",on:{mousedown:e.inputMouseDown,mouseup:function(t){return t.preventDefault(),e.inputMouseUp(t)},mousemove:e.inputMouseMove}}),n("div",{staticClass:"node-main"},[n("div",{staticClass:"node-type",domProps:{textContent:e._s(e.type)}}),n("div",{staticClass:"node-label",domProps:{textContent:e._s(e.label)}})]),n("div",{staticClass:"node-port node-output",on:{mousedown:function(t){return t.preventDefault(),e.outputMouseDown(t)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show.delete,expression:"show.delete"}],staticClass:"node-delete"},[e._v("×")])])},w=[],L={name:"FlowchartNode",props:{id:{default:1e3},x:{type:Number,default:0,validator:function(e){return"number"===typeof e}},y:{type:Number,default:0,validator:function(e){return"number"===typeof e}},type:{type:String,default:"Default"},label:{type:String,default:"input name"},borderColor:String,options:{type:Object,default:function(){return{centerX:1024,centerY:140,scale:1,selected:[],orientation:"vert",width:80,height:80,themeColor:"",nodeBgColor:"",typeColor:"",labelColor:"",canChange:!0}}}},data:function(){return{show:{delete:!1}}},computed:{isSelected:function(){return this.options.selected.includes(this.id)},nodeStyle:function(){var e={top:this.options.centerY+this.y*this.options.scale+"px",left:this.options.centerX+this.x*this.options.scale+"px",transform:"scale(".concat(this.options.scale,")"),width:this.options.width+"px",height:this.options.height+"px","--theme-color":this.options.themeColor,"--node-bgcolor":this.options.nodeBgColor,"--type-color":this.options.typeColor,"--label-color":this.options.labelColor};return this.borderColor&&!this.isSelected&&(e["box-shadow"]="0 0 0 2px ".concat(this.borderColor)),e}},methods:{handleMousedown:function(e){var t=e.target||e.srcElement;t.className.indexOf("node-input")<0&&t.className.indexOf("node-output")<0&&this.$emit("nodeSelected",e)},handleMouseEnter:function(){this.options.canChange&&(this.show.delete=!0),this.$emit("nodeMouseEnter")},handleMouseLeave:function(){this.options.canChange&&(this.show.delete=!1),this.$emit("nodeMouseLeave")},outputMouseDown:function(){this.$emit("linkingStart")},inputMouseDown:function(e){e.preventDefault()},inputMouseUp:function(){this.$emit("linkingStop")},inputMouseMove:function(){this.$emit("tryLinking")}}},S=L,N=(n("2691"),Object(y["a"])(S,C,w,!1,null,"533c9c4c",null)),M=N.exports;function O(e){var t=e.getBoundingClientRect(),n=window.pageYOffset,o=window.pageXOffset,i=t.top+n,s=t.left+o;return{top:Math.round(i),left:Math.round(s)}}function x(e,t){var n=t.pageX||t.clientX+document.documentElement.scrollLeft,o=t.pageY||t.clientY+document.documentElement.scrollTop,i=O(e),s=n-i.left,r=o-i.top;return[s,r]}function $(e,t){return E(e)||j(e,t)||P(e,t)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done);o=!0)if(n.push(r.value),t&&n.length===t)break}catch(a){i=!0,s=a}finally{try{o||null==l["return"]||l["return"]()}finally{if(i)throw s}}return n}}function E(e){if(Array.isArray(e))return e}function _(e){return X(e)||I(e)||P(e)||D()}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){if(e){if("string"===typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function I(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function X(e){if(Array.isArray(e))return Y(e)}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=80,U=80,H="#ff8855",R="#fff",K="#fff",z="#2c3e50",J=2.73205,V=8,q=100,G={name:"VueLightFlowchart",props:{scene:{type:Object,default:function(){return{centerX:1024,centerY:140,scale:1,nodes:[],links:[],orientation:"vert",canChangeNodes:!0,canChangeLinks:!0,showDeleteNode:!0,showDeleteLink:!0,styles:{nodeWidth:F,nodeHeight:U,themeColor:H,nodeBgColor:R,typeColor:K,labelColor:z,linkWidth:J}}}},height:{type:Number,default:400}},data:function(){return{action:{linking:!1,dragging:!1,scrolling:!1,selected:[]},mouse:{x:0,y:0,lastX:0,lastY:0},draggingLink:null,rootDivOffset:{top:0,left:0}}},components:{FlowchartLink:b,FlowchartNode:M},watch:{"scene.nodes":{handler:"setNodes",immediate:!0}},computed:{scale:function(){return this.scene.scale||1},orientation:function(){return this.scene.orientation||"vert"},styles:function(){return T(T({},{nodeWidth:F,nodeHeight:U,themeColor:H,nodeBgColor:R,typeColor:K,labelColor:z,linkWidth:J}),this.scene.styles)},nodeOptions:function(){return{centerY:this.scene.centerY,centerX:this.scene.centerX,scale:this.scale,selected:this.action.selected,orientation:this.orientation,width:this.styles.nodeWidth,height:this.styles.nodeHeight,themeColor:this.styles.themeColor,nodeBgColor:this.styles.nodeBgColor,typeColor:this.styles.typeColor,labelColor:this.styles.labelColor,canChange:this.scene.canChangeNodes||this.scene.showDeleteNode}},linkOptions:function(){return{scale:this.scale,themeColor:this.styles.themeColor,labelColor:this.styles.labelColor,linkWidth:this.styles.linkWidth,canChange:this.scene.canChangeLinks||this.scene.showDeleteLink}},lines:function(){var e=this,t=this.scene.links.map((function(t){var n=t.nodes,o=t.id,i=t.color;return{segments:e.getSegments(n),id:o,color:i}}));if(this.draggingLink){var n=[],o=this.findNode(this.draggingLink.lastNodeId),i=this.draggingLink.nodes;if(i.length>0){n.push.apply(n,_(this.getSegments(i)));var s=this.findNode(i[i.length-1]),r=this.getPortPosition(s,"output"),l=$(r,2),a=l[0],c=l[1],u=this.getPortPosition(o,"input"),d=$(u,2),h=d[0],f=d[1];n.push([a,c,h,f])}var p=this.getPortPosition(o,"output"),g=$(p,2),m=g[0],v=g[1];n.push([m,v,this.draggingLink.mx,this.draggingLink.my]),t.push({segments:n})}return t}},mounted:function(){this.rootDivOffset.top=this.$el?this.$el.offsetTop:0,this.rootDivOffset.left=this.$el?this.$el.offsetLeft:0,this.select={lastClickedId:null,isCtrlClick:!1,isClickedSelected:!1,wasDragging:!1}},methods:{setNodes:function(){var e=this;this.nodes=new Map,this.scene.nodes.forEach((function(t){return e.nodes[t.id]=t}))},findNode:function(e){return this.nodes[e]},getSegments:function(e){for(var t=[],n=this.findNode(e[0]),o=1;o<e.length;o++){var i=this.findNode(e[o]),s=this.getPortPosition(n,"output"),r=$(s,2),l=r[0],a=r[1],c=this.getPortPosition(i,"input"),u=$(c,2),d=u[0],h=u[1];t.push([l,a,d,h]),n=i}return t},getPortPosition:function(e,t){var n=this.orientation,o=this.scale,i=this.scene.centerX+e.x*o,s=this.scene.centerY+e.y*o,r=this.styles.nodeWidth,l=this.styles.nodeHeight;if("vert"===n){var a=i+r/2*o;return"input"===t?[a,s]:[a,s+l*o]}var c=s+l/2*o;return"input"===t?[i,c]:[i+r*o,c]},linkingStart:function(e){if(this.scene.canChangeLinks||this.scene.showDeleteLink){var t=this.findNode(e),n=this.getPortPosition(t,"output"),o=$(n,2),i=o[0],s=o[1];this.action.linking=!0,this.draggingLink={nodes:[],lastNodeId:e,mx:i,my:s}}},tryAddNodeToLink:function(e){var t=this.draggingLink;t&&(t.lastNodeId===e||this.isLinkIntersections(t,e)||(t.nodes.push(t.lastNodeId),t.lastNodeId=e))},linkingStop:function(e){var t=this.draggingLink;if(t&&(this.draggingLink=null,e===t.lastNodeId&&!this.isLinkIntersections(t,e)&&(t.nodes.push(e),!this.isLinkExists(t)))){var n=Math.max.apply(Math,[0].concat(_(this.scene.links.map((function(e){return e.id}))))),o={id:n+1,nodes:t.nodes};this.scene.links.push(o),this.$emit("linkAdded",o)}},isLinkIntersections:function(e,t){return e.nodes.some((function(e){return e===t}))},isLinkExists:function(e){return this.scene.links.some((function(t){var n=t.nodes;return e.nodes.length===n.length&&e.nodes.every((function(e,t){return e===n[t]}))}))},linkClick:function(e){this.$emit("linkClick",this.findLink(e))},linkDelete:function(e){var t=this.findLink(e);t&&(this.scene.links=this.scene.links.filter((function(t){return t.id!==e})),this.$emit("linkBreak",t))},linkMouseEnter:function(e){this.action.dragging||this.$emit("linkMouseEnter",this.findLink(e))},linkMouseLeave:function(e){this.action.dragging||this.$emit("linkMouseLeave",this.findLink(e))},findLink:function(e){return this.scene.links.find((function(t){return t.id===e}))},nodeSelected:function(e,t){this.select={lastClickedId:e,isCtrlClick:t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey,isClickedSelected:this.action.selected.includes(e),wasDragging:!1},this.action.dragging=!0,this.selectNodeOnDown(e),this.$emit("nodeClick",e);var n=x(this.$el,t),o=$(n,2);this.mouse.lastX=o[0],this.mouse.lastY=o[1]},handleMove:function(e){if(this.action.linking){var t=x(this.$el,e),n=$(t,2);this.draggingLink.mx=n[0],this.draggingLink.my=n[1],this.mouse.lastEvent=e,this.startAutoScroll()}else if(this.action.dragging){var o=x(this.$el,e),i=$(o,2),s=i[0],r=i[1],l=s-this.mouse.lastX,a=r-this.mouse.lastY;this.mouse.lastX=s,this.mouse.lastY=r,this.mouse.lastEvent=e,this.moveSelectedNodes(l,a),this.select.wasDragging=!0,this.startAutoScroll()}else if(this.action.scrolling){var c=x(this.$el,e),u=$(c,2),d=u[0],h=u[1],f=d-this.mouse.lastX,p=h-this.mouse.lastY;this.mouse.lastX=d,this.mouse.lastY=h,this.scene.centerX+=f,this.scene.centerY+=p}},handleDown:function(e){var t=e.target||e.srcElement;if((t===this.$el||t.matches("svg, svg *"))&&1===e.which){this.action.scrolling=!0;var n=x(this.$el,e),o=$(n,2);this.mouse.lastX=o[0],this.mouse.lastY=o[1],this.action.selected=[]}this.$emit("canvasClick",e)},handleUp:function(e){var t=e.target||e.srcElement;this.$el.contains(t)&&(("string"!==typeof t.className||t.className.indexOf("node-input")<0)&&(this.draggingLink=null),(this.scene.canChangeNodes||this.scene.showDeleteNode)&&"string"===typeof t.className&&t.className.indexOf("node-delete")>-1&&this.nodeDelete(this.select.lastClickedId)),this.selectNodeOnUp(),this.action.linking=!1,this.action.dragging=!1,this.action.scrolling=!1,this.stopAutoScroll()},selectNodeOnDown:function(e){var t=this.select,n=t.isClickedSelected,o=t.isCtrlClick;n||(o?this.action.selected.push(e):this.action.selected=[e])},selectNodeOnUp:function(){var e=this.select,t=e.wasDragging,n=e.isClickedSelected,o=e.isCtrlClick,i=e.lastClickedId;t||n&&(this.action.selected=o?this.action.selected.filter((function(e){return e!==i})):[i])},moveSelectedNodes:function(e,t){var n=this;this.scene.nodes.forEach((function(o,i){if(n.action.selected.includes(o.id)){var s=o.x+e/n.scale,r=o.y+t/n.scale;n.$set(n.scene.nodes,i,Object.assign(o,{x:s,y:r}))}}))},startAutoScroll:function(){this.autoScrollId||(this.autoScrollId=setInterval(this.autoScroll.bind(this),q))},stopAutoScroll:function(){this.autoScrollId&&(clearInterval(this.autoScrollId),this.autoScrollId=null)},autoScroll:function(){var e=x(this.$el,this.mouse.lastEvent),t=$(e,2),n=t[0],o=t[1],i=this.$el.getBoundingClientRect(),s=i.width,r=i.height,l=this.styles.nodeWidth/2,a=this.styles.nodeHeight/2,c=0,u=0;n<l?c=-V:s-n<l&&(c=V),o<a?u=-V:r-o<a&&(u=V),0===c&&0===u||(this.moveSelectedNodes(c,u),this.scene.centerX-=c,this.scene.centerY-=u)},nodeDelete:function(e){this.scene.nodes=this.scene.nodes.filter((function(t){return t.id!==e})),this.scene.links=this.scene.links.filter((function(t){return!t.nodes.some((function(t){return t===e}))})),this.$emit("nodeDelete",e)},nodeMouseEnter:function(e){this.action.dragging||this.$emit("nodeMouseEnter",e)},nodeMouseLeave:function(e){this.action.dragging||this.$emit("nodeMouseLeave",e)}}},Q=G,Z=(n("9004"),Object(y["a"])(Q,r,l,!1,null,"7bbb10b7",null)),ee=Z.exports;function te(e){return se(e)||ie(e)||oe(e)||ne()}function ne(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oe(e,t){if(e){if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}function ie(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function se(e){if(Array.isArray(e))return re(e)}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var le={name:"app",components:{LightFlowchart:ee},data:function(){return{scene:{centerX:1024,centerY:140,scale:1,nodes:[{id:"test1",x:-550,y:-69,type:"Action",label:"do it"},{id:3,x:-200,y:-69,type:"Action",label:"run it"},{id:"test3",x:-680,y:80,type:"Rule",label:"test"},{id:4,x:-457,y:80,type:"Rule",label:"Another test"},{id:5,x:-357,y:80,type:"Rule",label:"test2",borderColor:"#aa1111"},{id:7,x:-240,y:80,type:"Rule",label:"something"},{id:100,x:-557,y:230,type:"Script",label:"Step out"},{id:102,x:-357,y:230,type:"Script",label:"Step in",borderColor:"#11aa11"},{id:110,x:-200,y:230,type:"Script",label:"Work"}],links:[{id:1,nodes:["test1","test3"]},{id:3,color:"#FFF457",nodes:["test1",5,102]},{id:10,color:"#69fcff",nodes:["test1",4,100]}],orientation:"vert",canChangeNodes:!0,canChangeLinks:!0},newNodeType:0,newNodeLabel:"",nodeCategory:["rule","action","script","decision","fork","join"]}},methods:{addNode:function(){var e=Math.max.apply(Math,[0].concat(te(this.scene.nodes.filter((function(e){return Number.isFinite(e.id)})).map((function(e){return e.id})))));console.log("addNode",e),this.scene.nodes.push({id:e+1,x:-400,y:50,type:this.nodeCategory[this.newNodeType],label:this.newNodeLabel?this.newNodeLabel:"test".concat(e+1)})},canvasClick:function(e){console.log("canvas Click, event:",e)},nodeClick:function(e){console.log("node click",e)},nodeDelete:function(e){console.log("node delete",e)},nodeMouseEnter:function(e){console.log("node mouse enter",e)},nodeMouseLeave:function(e){console.log("node mouse leave",e)},linkClick:function(e){console.log("link click",e)},linkBreak:function(e){console.log("link break",e)},linkAdded:function(e){console.log("new link added:",e)},linkMouseEnter:function(e){console.log("link mouse enter",e)},linkMouseLeave:function(e){console.log("link mouse leave",e)}}},ae=le,ce=(n("5c0b"),Object(y["a"])(ae,i,s,!1,null,null,null)),ue=ce.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(ue)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("9c0c"),i=n.n(o);i.a},9004:function(e,t,n){"use strict";var o=n("3f44"),i=n.n(o);i.a},"9c0c":function(e,t,n){},f488:function(e,t,n){}});
//# sourceMappingURL=app.4022a352.js.map